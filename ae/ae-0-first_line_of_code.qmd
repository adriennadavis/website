---
title: "Introduction to the diamonds dataset"
output: 
   html_document
---

::: callout-important
This application exercise is due at noon on 6 Sept at 11:59am.
:::

# Scenario

You own a jewelry business and are working to price your [diamonds](tps://www.londonde.com/blogs/worlds-most-famous-diamonds/). To facilitate, you **explore** the diamond dataset in R and pay special attention to the cost of the diamond. Let's **explore** together.

# Coding basics

[Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread.](https://style.tidyverse.org/index.html)

-   When writing code, load all libraries first.

-   "\##" is used to write comments in R and should be used to justify next steps and anything unusual or unexpected steps

-   Comments are really important and are notes to your future self to remind you about steps that you took and decisions that you made.

```{r load-packages, eval=FALSE, echo=TRUE}
#| warning: false
#| message: false

## loading library
library(tidyverse) # for data analysis and visualisation
library(plotly) # for interactive plots
```

# Data

The `diamonds` dataset includes basic information about 53940 diamonds including price and other characteristics.

```{r read-data, echo=TRUE, eval=FALSE}
#| message: false
#| warning: false

## View the dataset in a separate tab
View(diamonds)
```

The \_\_\_ dataset has \_\_\_ observations and \_\_\_ variables.

What are these variables and what do they mean?

```{r help-on-dataset, eval=FALSE, echo=TRUE}
## What are the variables in this dataset?
## What are they counting?
?diamonds
```

1.  What do the "4 c's" of every diamond mean? What kind of variables are they? (hint: This [video](https://www.youtube.com/watch?v=FqB5Es1HXI4) may help, and please copy this into your notes)

```{r plot-price, eval=FALSE, echo=TRUE}
## What is the distribution of price?
ggplot(data = diamonds) +
  geom_histogram(mapping = aes(x = price), binwidth = 1) 
```

2.  What does the binwidth in the geom_histogram() function do? (hint: draw multiple plots changing this value) What binwidth value is appropriate?

The distribution of diamond prices is right skewed (long right tail).

3.  In your notes, copy [these histograms](https://www.statology.org/describe-shape-of-histogram/) and the words used to describe them.

One interesting feature of this graph is the dip in diamonds priced at about \$1000. Let's explore this a little further and look at some basic [dplyr commands](https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf).

```{r, diamonds_about_1000_a, eval=FALSE, echo=TRUE}
diamonds %>% 
  filter(price > 750 & price < 1250) %>% 
  View()
```

3.  What does the filter function do?

```{r diamonds_about_1000_b, eval=FALSE, echo=TRUE}
diamonds %>% 
  filter(price > 750 & price < 1250) %>% 
  mutate(price_hundred = price %/% 100) %>% 
  View()
```

4.  What does this "%/%" operator do? (hint: run 10 %/% 3, 10 %/% 5, 7 %/% 3, 7 %/% 5 in the console)

5.  What does the mutate function do? (hint: pay special attention to the dimensions of the data)

```{r diamonds_about_1000_c, eval=FALSE, echo=TRUE}
diamonds %>% 
  filter(price > 750 & price < 1250) %>% 
  mutate(price_hundred = price %/% 100) %>% 
  select(price, price_hundred) %>% 
  View()
```

6.  What does the select function do?

```{r diamonds_about_1000_d, eval=FALSE, echo=TRUE}
diamonds %>% 
  filter(price > 750 & price < 1250) %>% 
  mutate(price_hundred = price %/% 100) %>% 
  select(price, price_hundred) %>% 
  count(price_hundred) %>% 
  View()
```

```{r diamonds_about_1000_e, eval=FALSE, echo=TRUE}
diamonds %>% 
  filter(price > 750 & price < 1250) %>% 
  mutate(price_hundred = price %/% 100) %>% 
  select(price, price_hundred) %>% 
  mutate(price_remainder = price %% 100) %>% 
  count(price_hundred, price_remainder) %>% 
  View()
```

7.  What does the "%%" function find?

This feature is probably better identified graphically.

```{r plotly, eval=FALSE, echo=TRUE}

```

Cut may impact upon price

```{r cut_plot, eval=FALSE, echo=TRUE}
ggplot(data = diamonds) +
  geom_histogram(mapping = aes(x = price, color = cut, fill = cut),
                 binwidth = 100) 
```

8.  Which cut do you suspect is the most common in the dataset? How many diamonds with that cut are in the dataset?

    ```{r cut_count, eval=FALSE, echo=TRUE}
    diamonds %>% 
      INSERT_FUNCTION_HERE(cut)
    ```

9.  The variables color or clarity might impact upon the price. Draw a histogram and color it using one of them.

    ```{r cut, eval=FALSE, echo=TRUE}
    ggplot(data = diamonds) +
      geom_histogram(mapping = aes(x = price, color = VAR_NAME, 
                                   fill = VAR_NAME), 
                     binwidth = YOUR_BIN_WIDTH) 
    ```

10. What do the fill and color inputs do in the above coding?

8.  
9.  
